<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All students</title>
    <link href="../Stylesheet/style.css" rel="stylesheet">
    <link rel = 'shortcut icon' type="image/png" href="Images/fullstack logo.png">
</head>
<body>

    <header class='item head' >
        
    <nav class="navBar">
        <div class="navbar-nav">
                <a class="navBar-item active" aria-current="page" href="/" id="'home-nav">Home</a>
                
            </div>
    </nav><!--end nav-->
    
</header>

    
<main class="container">

    

<div class="item">

    <h1>All Students' Data</h1>

        


        <% if (locals.error) { %>
        

      <p style="color: red"><%= locals.error %>  <br>
</p>
    <% } %>

     



    





















  

  <% users.forEach(user => { %>
    <div class="user-card">
      <div><span class="label">User ID:</span> <%= user.userId %></div>
      <div><span class="label">First Name:</span> <%= user.firstName %></div>
      <div><span class="label">Last Name:</span> <%= user.lastName %></div>
      <div><span class="label">Email:</span> <%= user.email %></div>
      <div><span class="label">Country:</span> <%= user.country %></div>
      <div><span class="label">Registered:</span> <%= user.registrationDate.toLocaleDateString() %></div>
      <div><span class="label">Enrolled Courses:</span> <%= user.enrolledCourses.join(', ') || 'None' %></div>

      <% if (user.scholarshipAppliedCourses.length) { %>
        <div><span class="label">Scholarship Applications:</span></div>
        <ul>
          <% user.scholarshipAppliedCourses.forEach(app => { %>
            <li>
              Course: <%= app.course %><br>
              Reason: <%= app.reason %><br>
              Applied: <%= app.appliedAt.toLocaleDateString() %>
            </li>
          <% }) %>
        </ul>
      <% } %>
    </div>
  <% }) %>




        
    </div>

    
</main>

<footer class="footer item">

<a href = '/Our-Mission'>Our Mission</a> <br>
<a href ='/Contac-Us'>Contact Us</a> <br>





    </footer>

    <p id="copyright"> </p>

    <script>


 const copyRightHolder = document.getElementById("copyright");
  const today = new Date();
  const thisYear = today.getFullYear();
  copyRightHolder.innerText = `Code Skill Africa \u00A9 ${thisYear}. All Rights Reserved.`;
  copyRightHolder.style.color = 'yellowGreen';


function togglePasswordVisibility() {

    const passwordInput = document.getElementById('password-input');
    const showPasswordCheckbox = document.getElementById('show-password-checkbox');

    if (showPasswordCheckbox.checked) {

passwordInput.type = 'text';

    }else{

        passwordInput.type= 'password';
    }

}


function clearLoginForm() {
    const loginForm = document.querySelector('form');
    if (loginForm) {
      loginForm.reset();
      
      // Also clear any input fields manually (in case reset doesn't work)
      const inputs = loginForm.querySelectorAll('.log-in-input');
      inputs.forEach(input => {
        input.value = '';
      });
      
      // Clear any error messages if they exist
      const errorMessages = document.querySelectorAll('.error-message');
      errorMessages.forEach(error => {
        error.textContent = '';
      });
    }
  }

  // Clear form when page loads
  window.addEventListener('load', clearLoginForm);

  // Clear form on page show (handles browser back/forward)
  window.addEventListener('pageshow', (event) => {
    // Force clear even from cache
    clearLoginForm();
  });

  // Clear form when user leaves and comes back
  window.addEventListener('focus', clearLoginForm);

  // Prevent autocomplete from persisting data
  document.addEventListener('DOMContentLoaded', () => {
    const loginForm = document.querySelector('form');
    if (loginForm) {
      loginForm.setAttribute('autocomplete', 'off');
      
      const inputs = loginForm.querySelectorAll('input');
      inputs.forEach(input => {
        input.setAttribute('autocomplete', 'off');
      });
    }
  });

</script>
</body>
</html>